<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Administrador de pedidos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="container">
    <h1>Pedidos recibidos</h1>

    <div class="controls">
      <input id="searchInput" placeholder="Buscar por nombre o pedido...">
      <button id="exportBtn">Exportar a Excel (CSV)</button>
      <button id="clearBtn" class="danger">Eliminar todo</button>
    </div>

    <div id="serverControls" class="controls">
      <button id="refreshFilesBtn">Leer carpeta del servidor</button>
      <button id="downloadMasterBtn">Descargar maestro (.enf)</button>
      <button id="downloadJsonBtn">Descargar JSON</button>
      <button id="downloadCsvBtn">Descargar CSV</button>
    </div>

    <div id="filesList" class="note">Archivos en servidor: <span id="serverFiles"></span></div>

    <div id="historyBox" class="note">Historial reciente: <span id="historyList"></span></div>

    <table id="submissionsTable">
      <thead>
        <tr><th>Nombre</th><th>Pedido</th><th>Medida</th><th>Cantidad</th><th>Fecha</th><th>Acciones</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <div id="empty" class="note">No hay pedidos todavía.</div>
  </main>

  <!-- SheetJS (xlsx) para exportar .xlsx en el navegador -->
  <script>
    // Si ejecutas el servidor, establece aquí la base, por ejemplo:
    // window.SERVER_BASE = 'http://localhost:3000';
    window.SERVER_BASE = window.SERVER_BASE || '';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
